<!-- GitHub & GitLab Activity Section -->
<section id="github-activity" class="section github-activity-section" aria-labelledby="github-activity-title">
    <div class="container">
        <header>
            <h2 id="github-activity-title" class="section-title">Coding Activity</h2>
            <p class="section-subtitle">Recent contributions and development activity across platforms</p>
        </header>
        
        <div class="activity-grid">
            <!-- GitHub Activity -->
            <div class="activity-card github-card">
                <div class="activity-header">
                    <i class="fa fa-github" aria-hidden="true"></i>
                    <h3>GitHub Activity</h3>
                    <a href="https://github.com/prashanthvarma" target="_blank" rel="noopener noreferrer" class="profile-link" aria-label="Visit GitHub profile">
                        <i class="fa fa-external-link" aria-hidden="true"></i>
                    </a>
                </div>
                
                <!-- GitHub Contributions Graph -->
                <div class="contributions-container">
                    <img src="https://ghchart.rshah.org/2563eb/prashanthvarma" alt="GitHub Contributions Graph" class="contributions-graph" loading="lazy">
                </div>
                
                <!-- GitHub Stats -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number" id="github-repos">Loading...</span>
                        <span class="stat-label">Repositories</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="github-stars">Loading...</span>
                        <span class="stat-label">Stars</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="github-followers">Loading...</span>
                        <span class="stat-label">Followers</span>
                    </div>
                </div>
                
                <!-- Recent Repositories -->
                <div class="recent-repos">
                    <h4>Recent Repositories</h4>
                    <div class="repo-list" id="github-repo-list">
                        <div class="loading-placeholder">Loading repositories...</div>
                    </div>
                </div>
            </div>
            
            <!-- GitLab Activity -->
            <div class="activity-card gitlab-card">
                <div class="activity-header">
                    <i class="fa fa-gitlab" aria-hidden="true"></i>
                    <h3>GitLab Activity</h3>
                    <a href="https://gitlab.com/pmanthena" target="_blank" rel="noopener noreferrer" class="profile-link" aria-label="Visit GitLab profile">
                        <i class="fa fa-external-link" aria-hidden="true"></i>
                    </a>
                </div>
                
                <!-- GitLab Contributions -->
                <div class="contributions-container">
                    <div class="gitlab-contributions">
                        <p class="gitlab-info">GitLab activity and contributions</p>
                        <div class="gitlab-stats">
                            <div class="stat-item">
                                <span class="stat-number">Active</span>
                                <span class="stat-label">Projects</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- GitLab Projects -->
                <div class="recent-repos">
                    <h4>Recent Projects</h4>
                    <div class="repo-list">
                        <div class="repo-item">
                            <i class="fa fa-folder" aria-hidden="true"></i>
                            <span>Graphiant Projects</span>
                        </div>
                        <div class="repo-item">
                            <i class="fa fa-folder" aria-hidden="true"></i>
                            <span>Network Infrastructure</span>
                        </div>
                        <div class="repo-item">
                            <i class="fa fa-folder" aria-hidden="true"></i>
                            <span>Cloud Management</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Activity Summary -->
        <div class="activity-summary">
            <div class="summary-card">
                <h3>Development Focus</h3>
                <div class="focus-areas">
                    <span class="focus-tag">Network Architecture</span>
                    <span class="focus-tag">Cloud Systems</span>
                    <span class="focus-tag">Software Engineering</span>
                    <span class="focus-tag">Team Leadership</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- GitHub Activity Script -->
<script>
// GitHub API integration with enhanced features
async function loadGitHubActivity() {
    try {
        // Fetch GitHub user data
        const response = await fetch('https://api.github.com/users/prashanthvarma');
        const userData = await response.json();
        
        // Update stats
        document.getElementById('github-repos').textContent = userData.public_repos || '0';
        document.getElementById('github-followers').textContent = userData.followers || '0';
        
        // Fetch repositories with more details
        const reposResponse = await fetch('https://api.github.com/users/prashanthvarma/repos?sort=updated&per_page=6&type=all');
        const repos = await reposResponse.json();
        
        // Update repository list with enhanced information
        const repoList = document.getElementById('github-repo-list');
        repoList.innerHTML = repos.map(repo => {
            const icon = repo.fork ? 'fa-code-fork' : 'fa-code';
            const language = repo.language || 'N/A';
            const stars = repo.stargazers_count || 0;
            const forks = repo.forks_count || 0;
            
            return `
                <div class="repo-item">
                    <i class="fa ${icon}" aria-hidden="true"></i>
                    <div class="repo-info">
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer">${repo.name}</a>
                        <div class="repo-meta">
                            <span class="repo-language">${language}</span>
                            ${stars > 0 ? `<span class="repo-stars"><i class="fa fa-star"></i> ${stars}</span>` : ''}
                            ${forks > 0 ? `<span class="repo-forks"><i class="fa fa-code-fork"></i> ${forks}</span>` : ''}
                        </div>
                    </div>
                </div>
            `;
        }).join('');
        
        // Calculate total stars and forks
        const totalStars = repos.reduce((sum, repo) => sum + (repo.stargazers_count || 0), 0);
        const totalForks = repos.reduce((sum, repo) => sum + (repo.forks_count || 0), 0);
        document.getElementById('github-stars').textContent = totalStars;
        
        // Add total forks to stats if needed
        if (totalForks > 0) {
            const statsGrid = document.querySelector('.stats-grid');
            if (statsGrid.children.length === 3) {
                const forksStat = document.createElement('div');
                forksStat.className = 'stat-item';
                forksStat.innerHTML = `
                    <span class="stat-number">${totalForks}</span>
                    <span class="stat-label">Forks</span>
                `;
                statsGrid.appendChild(forksStat);
            }
        }
        
        // Add loading animation
        const loadingElements = document.querySelectorAll('.loading-placeholder');
        loadingElements.forEach(el => {
            el.style.opacity = '0';
            setTimeout(() => el.remove(), 300);
        });
        
    } catch (error) {
        console.log('GitHub API error:', error);
        // Fallback to static content
        document.getElementById('github-repos').textContent = 'Active';
        document.getElementById('github-stars').textContent = 'Contributions';
        document.getElementById('github-followers').textContent = 'Community';
        
        // Show fallback repository list
        const repoList = document.getElementById('github-repo-list');
        repoList.innerHTML = `
            <div class="repo-item">
                <i class="fa fa-code" aria-hidden="true"></i>
                <div class="repo-info">
                    <span>GitHub Profile</span>
                    <div class="repo-meta">
                        <span class="repo-language">Active</span>
                    </div>
                </div>
            </div>
            <div class="repo-item">
                <i class="fa fa-code" aria-hidden="true"></i>
                <div class="repo-info">
                    <span>Open Source</span>
                    <div class="repo-meta">
                        <span class="repo-language">Contributions</span>
                    </div>
                </div>
            </div>
        `;
    }
}

// Load GitHub activity when page loads
document.addEventListener('DOMContentLoaded', loadGitHubActivity);

// Refresh data every 5 minutes
setInterval(loadGitHubActivity, 300000);
</script>
